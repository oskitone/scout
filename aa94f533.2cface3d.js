(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{182:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/files/serial-plotter-3fc8a06fccb5b4ea7894526b9c2f1aa3.png"},183:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/serial-plotter-3fc8a06fccb5b4ea7894526b9c2f1aa3.png"},87:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return l})),a.d(t,"default",(function(){return s}));var n=a(3),o=a(7),r=(a(0),a(99)),i={id:"change-the-arduino-code",title:"Change the Arduino code",description:"Hack, hack, hack, hack, hack, hack.",sidebar_label:"Change the Arduino code",image:"/img/hack/serial-plotter.png",slug:"/change-the-arduino-code"},c={unversionedId:"change-the-arduino-code",id:"change-the-arduino-code",isDocsHomePage:!1,title:"Change the Arduino code",description:"Hack, hack, hack, hack, hack, hack.",source:"@site/docs/change-the-arduino-code.md",slug:"/change-the-arduino-code",permalink:"/scout/change-the-arduino-code",version:"current",sidebar_label:"Change the Arduino code",sidebar:"someSidebar",previous:{title:"Care",permalink:"/scout/care"},next:{title:"Community hacks",permalink:"/scout/community-hacks"}},l=[{value:"Required equipment",id:"required-equipment",children:[]},{value:"Steps",id:"steps",children:[]},{value:"Serial debugging",id:"serial-debugging",children:[]},{value:"Pins",id:"pins",children:[]},{value:"Troubleshooting",id:"troubleshooting",children:[]}],b={rightToc:l};function s(e){var t=e.components,i=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},b,i,{components:t,mdxType:"MDXLayout"}),Object(r.b)("div",{className:"admonition admonition-info alert alert--info"},Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"This section is optional!"))),Object(r.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(r.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"If you're building your ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/scout/bom"}),"Scout from scratch")," and sourced your own ATmega328, it ",Object(r.b)("em",{parentName:"p"},"must")," have a bootloader programmed onto it for these instructions to work."))),Object(r.b)("h2",{id:"required-equipment"},"Required equipment"),Object(r.b)("p",null,"To keep the Scout's price more accessible, it doesn't come with a built-in USB controller chip, so, out of the box, you can't easily hook it up to your computer as-is."),Object(r.b)("p",null,"Thankfully, that USB chip is readily available as a cable, which you can connect between your Scout and your computer."),Object(r.b)("p",null,"These cables have been tested and confirmed to work with the Scout:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.adafruit.com/product/70"}),"FTDI Serial TTL-232 USB Cable")," from Adafruit"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"https://cornfieldelectronics.com/cfe/products/buy.php?productId=usbcable&PHPSESSID=oos5v81hlitjvb0grhgolsrq96"}),"USB Serial Cable")," from Cornfield Electronics"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"http://www.hiletgo.com/ProductDetail/2152064.html"}),"FT232RL FTDI USB to TTL Serial Adapter")," from HiLetgo")),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"Successfully use a different brand of cable? ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.oskitone.com/contact"}),"Contact me")," and I can add it to the list."))),Object(r.b)("h2",{id:"steps"},"Steps"),Object(r.b)("p",null,"Ready to experiment and get your hands dirty with some code?"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Install the ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.arduino.cc/en/software"}),"Arduino IDE")," and follow their instructions to install whatever drivers you'd need for an Arduino Uno."),Object(r.b)("li",{parentName:"ol"},"With the Scout's power off, connect the Scout's UART header to your computer using one of the cables listed above.",Object(r.b)("ol",{parentName:"li"},Object(r.b)("li",{parentName:"ol"},'The Scout\'s UART header has "B" and "G" labels on its sides to match the cables Black and Green wires.'),Object(r.b)("li",{parentName:"ol"},"The cable provides power to the Scout, so it should now be on and working normally"),Object(r.b)("li",{parentName:"ol"},Object(r.b)("strong",{parentName:"li"},"Double check that the power switch is OFF!")," Leaving it on can permanently damage the microcontroller or batteries!"))),Object(r.b)("li",{parentName:"ol"},'In the IDE, under "Tools->Board", select "Arduino Uno". Under "Tools->Port" select your new cable; its exact name will depend on the brand. If you\'re not sure which it is, try unplugging and restarting the IDE -- whichever it was will no longer be listed, so you\'ll know which it is when reconnecting and restarting.'),Object(r.b)("li",{parentName:"ol"},"Download the code from this repo and load ",Object(r.b)("inlineCode",{parentName:"li"},"arduino/scout.ino")," in the Arduino IDE. You'll also need the ",Object(r.b)("inlineCode",{parentName:"li"},"CircularBuffer")," and ",Object(r.b)("inlineCode",{parentName:"li"},"Keypad"),' libraries, so open up "Tools->Manage libraries" and search for those to install them.',Object(r.b)("ol",{parentName:"li"},Object(r.b)("li",{parentName:"ol"},'Try uploading this to the Scout by going to "Sketch->Upload". If it works, after 10 seconds or so, it will blink just like it does when you switch its power on. If it doesn\'t work, the IDE will print out an error that you can google to find out how to fix.'),Object(r.b)("li",{parentName:"ol"},"Experiment with the ",Object(r.b)("inlineCode",{parentName:"li"},"octave")," and ",Object(r.b)("inlineCode",{parentName:"li"},"glide")," values at the top of ",Object(r.b)("inlineCode",{parentName:"li"},"scout.ino")," and observe how your Scout has changed its sound."))),Object(r.b)("li",{parentName:"ol"},'"Blink"',Object(r.b)("ol",{parentName:"li"},Object(r.b)("li",{parentName:"ol"},'The Arduino IDE has a default program called "Blink" (available in "File->Examples->Basics->Blink").'),Object(r.b)("li",{parentName:"ol"},"After uploading, the Scout won't be playable anymore but one of the colors on the RGB LED should blink off and on."),Object(r.b)("li",{parentName:"ol"},"Try changing the delay values in the example to make it blink faster or slower."),Object(r.b)("li",{parentName:"ol"},"Follow the steps above to bring the original Scout code back.")))),Object(r.b)("h2",{id:"serial-debugging"},"Serial debugging"),Object(r.b)("p",null,"Check out the ",Object(r.b)("inlineCode",{parentName:"p"},"printToSerial")," variable at the top of ",Object(r.b)("inlineCode",{parentName:"p"},"scout.ino"),". Setting it to ",Object(r.b)("inlineCode",{parentName:"p"},"true")," and opening up the Arduino's Serial Plotter while playing notes will visualize the notes being held and how the playing frequency glides between its targets."),Object(r.b)("p",null,Object(r.b)("a",{target:"_blank",href:a(182).default},Object(r.b)("img",{alt:"Screengrab of the Arduino serial plotter visualizing the Scout&#39;s frequency math",src:a(183).default}))),Object(r.b)("p",null,"Now swap ",Object(r.b)("inlineCode",{parentName:"p"},"frequency.print();")," in the ",Object(r.b)("inlineCode",{parentName:"p"},"loop()")," for ",Object(r.b)("inlineCode",{parentName:"p"},"buffer.print();")," and switch to the Serial Monitor, and you'll get a running list of the indexes of the key(s) the Scout sees being played."),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"All this observation slows down the Scout's performance/glide. Remember to put ",Object(r.b)("inlineCode",{parentName:"p"},"printToSerial")," back to ",Object(r.b)("inlineCode",{parentName:"p"},"false")," before disconnecting from your computer!"))),Object(r.b)("h2",{id:"pins"},"Pins"),Object(r.b)("p",null,"Once you're comfortable with the Arduino code and really want to expand on what the Scout can do, take a look at the unpopulated HACK header on the PCB. It exposes all the unused pins on the ATmega328 that are safe to use for whatever you'd like:"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"HACK"),Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"ATmega pins"),Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"VCC"),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"n/a"),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Voltage from batteries or USB")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"A0-A5"),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"23-28"),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Analog pins")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"D12"),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"18"),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"There's only one unused digital pin, and this is it")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"SWC, SW1-SW3"),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"16; 6,11,12"),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Unused spots in the key matrix")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"GND"),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"n/a"),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Ground")))),Object(r.b)("h2",{id:"troubleshooting"},"Troubleshooting"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Does the ATmega328 have a ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"https://docs.arduino.cc/retired/hacking/software/Bootloader/"}),"bootloader")," on it?"),Object(r.b)("li",{parentName:"ul"},"Is the chip all the way in its socket at the correct orientation?"),Object(r.b)("li",{parentName:"ul"},"Confirm the Scout powers up and operates with just the cable (and Scout's power switch off!)."),Object(r.b)("li",{parentName:"ul"},"Are you using one of the ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"#required-equipment"}),"known good")," FTDI cables? Confirm it's plugged in with green/black sides correctly."),Object(r.b)("li",{parentName:"ul"},"In the Arduino IDE, confirm you've got the right board selected, and try different ports."),Object(r.b)("li",{parentName:"ul"},"Take a closer look at the at the ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"prep-for-hacking"}),"UART header and its cap's soldering")," if you haven't already. Refer to the ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"schematics"}),"schematics")," and confirm its contact to the appropriate chip pins with a multimeter's continuity tester."),Object(r.b)("li",{parentName:"ul"},"As a last resort, try swapping to a new chip. Make sure it has a bootloader.")))}s.isMDXComponent=!0},99:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return h}));var n=a(0),o=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var b=o.a.createContext({}),s=function(e){var t=o.a.useContext(b),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},d=function(e){var t=s(e.components);return o.a.createElement(b.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},u=o.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,i=e.parentName,b=l(e,["components","mdxType","originalType","parentName"]),d=s(a),u=n,h=d["".concat(i,".").concat(u)]||d[u]||p[u]||r;return a?o.a.createElement(h,c(c({ref:t},b),{},{components:a})):o.a.createElement(h,c({ref:t},b))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,i=new Array(r);i[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:n,i[1]=c;for(var b=2;b<r;b++)i[b]=a[b];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"}}]);